<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Upload button</title>
		<link rel="shortcut icon" type="image/x-icon" href="./../static/app/favicon.ico" />
		<link rel="stylesheet" href="./../static/app/main.css" />
		<link rel="stylesheet" href="./../static/kindeditor/themes/default/default.css" />
		<script src="./../static/kindeditor/kindeditor-min.js"></script>
		<script src="./../static/kindeditor/lang/en.js"></script>
		<script>
			KindEditor.options.langType = 'en';
		</script>
	</head>
	<body>
		<div class="container">
			<div class="header fix">
				<ul class="fix right">
					<li><a href="./../">Home</a></li>
					<li class="active"><a href="./../demo">Demo</a></li>
					<li><a href="./../download">Download</a></li>
					<li><a href="./../documentation">Documentation</a></li>
					<li><a href="http://kindeditor.net/">中文站</a></li>
				</ul>
				<h3><a href="./../">KindEditor</a></h3>
			</div>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-7116729301372758";
google_ad_slot = "5052271949";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



<div class="module">
	<h3>Upload button</h3>
	<div class="upload">
		<input class="ke-input-text" type="text" id="url" value="" readonly="readonly" /> <input type="button" id="uploadButton" value="Upload" />
	</div>
</div>

<script>
	KindEditor.ready(function(K) {
		var uploadbutton = K.uploadbutton({
			button : K('#uploadButton')[0],
			fieldName : 'imgFile',
			url : '/path/to/php/upload_json.php?dir=file',
			afterUpload : function(data) {
				if (data.error === 0) {
					var url = K.formatUrl(data.url, 'absolute');
					K('#url').val(url);
				} else {
					alert(data.message);
				}
			},
			afterError : function(str) {
				alert('error message: ' + str);
			}
		});
		uploadbutton.fileBox.change(function(e) {
			uploadbutton.submit();
		});
	});
</script>

			<div class="footer">
				<p><a href="http://kindsoft.net/">Copyright 2013 kindsoft.net</a></p>
			</div>

		</div>
	</body>
</html>

