<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Upload button</title>
		<link rel="shortcut icon" type="image/x-icon" href="./../static/app/favicon.ico" />
		<link rel="stylesheet" href="./../static/app/main.css" />
		<link rel="stylesheet" href="./../static/kindeditor/plugins/code/prettify.css" />
		<link rel="stylesheet" href="./../static/kindeditor/themes/default/default.css" />
		<script src="./../static/kindeditor/plugins/code/prettify.js"></script>
		<script src="./../static/kindeditor/kindeditor-all-min.js"></script>
		<script>
			KindEditor.ready(function() {
				prettyPrint();
			});
		</script>
	</head>
	<body>
		<div class="container">
			<div class="header fix">
				<ul class="fix right">
					<li><a href="./../">Home</a></li>
					<li class="active"><a href="./../demo">Demo</a></li>
					<li><a href="./../download">Download</a></li>
					<li><a href="./../documentation">Documentation</a></li>
					<li><a href="http://kindeditor.net/">中文站</a></li>
				</ul>
				<h3><a href="./../">KindEditor</a></h3>
			</div>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-7116729301372758"
     data-ad-slot="5052271949"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



<div class="module">
	<h3>Upload button</h3>
	<div class="upload">
		<input class="ke-input-text" type="text" id="url" value="" readonly="readonly" /> <input type="button" id="uploadButton" value="Upload" />
	</div>
</div>

<script>
	KindEditor.ready(function(K) {
		var uploadbutton = K.uploadbutton({
			button : K('#uploadButton')[0],
			fieldName : 'imgFile',
			url : '/path/to/php/upload_json.php?dir=file',
			afterUpload : function(data) {
				if (data.error === 0) {
					var url = K.formatUrl(data.url, 'absolute');
					K('#url').val(url);
				} else {
					alert(data.message);
				}
			},
			afterError : function(str) {
				alert('error message: ' + str);
			}
		});
		uploadbutton.fileBox.change(function(e) {
			uploadbutton.submit();
		});
	});
</script>

			<div class="footer">
				<p><a href="http://kindsoft.net/">Copyright 2013 kindsoft.net</a></p>
			</div>

		</div>
	</body>
</html>

